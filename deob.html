<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obfuscator & Deobfuscator HTML (Kuat)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        textarea { -ms-overflow-style: none; scrollbar-width: none; }
        textarea::-webkit-scrollbar { display: none; }
        .btn-premium { background: linear-gradient(45deg, #8a2be2, #4a00e0); }
        .btn-premium:hover { background: linear-gradient(45deg, #9932cc, #5a10e0); }
        .focus-premium:focus { --tw-ring-color: #8a2be2; }
        .border-premium { border-color: #8a2be2; }
    </style>
</head>
<body class="bg-slate-900 text-white antialiased">

    <div class="container mx-auto px-4 py-8 md:py-12">

        <!-- Bagian Obfuscator -->
        <section id="obfuscator">
            <header class="text-center mb-8 md:mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-cyan-400">Obfuscator HTML</h1>
                <p class="mt-4 text-lg text-slate-400 max-w-2xl mx-auto">
                    Ubah kode HTML Anda menjadi JavaScript untuk menyembunyikan source code.
                </p>
            </header>

            <main class="w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-6">
                <!-- Kolom Input HTML -->
                <div class="flex-1 flex flex-col gap-4">
                    <label for="inputHtml" class="text-lg font-semibold text-slate-200">1. Masukkan Kode HTML</label>
                    <div class="relative flex-1">
                        <textarea id="inputHtml" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-slate-700 rounded-lg text-slate-300 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/50 transition duration-300 resize-none" placeholder="<!DOCTYPE html>..." spellcheck="false"></textarea>
                    </div>
                </div>
                
                <!-- Tombol Aksi Obfuscator -->
                <div class="flex-shrink-0 flex flex-col items-center justify-center gap-4">
                     <button id="obfuscateBtn" class="w-full md:w-48 h-12 px-6 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300">
                        Obfuscate (Biasa)
                    </button>
                    <button id="obfuscateHeavyBtn" class="group w-full md:w-48 h-12 px-6 btn-premium text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300 flex items-center justify-center">
                        <span>Obfuscate (Kuat)</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg>
                    </button>
                     <button id="clearObfuscatorBtn" class="w-full md:w-48 h-12 px-6 bg-slate-600 hover:bg-slate-700 text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300">
                        Bersihkan
                    </button>
                </div>

                <!-- Kolom Output JS -->
                <div class="flex-1 flex flex-col gap-4">
                    <label for="outputJs" class="text-lg font-semibold text-slate-200">2. Salin Hasil JavaScript</label>
                    <div class="relative flex-1">
                        <textarea id="outputJs" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-slate-700 rounded-lg text-slate-300 font-mono text-sm resize-none" readonly placeholder="Hasil JavaScript akan muncul di sini..."></textarea>
                        <button id="copyJsBtn" class="absolute top-3 right-3 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold py-1 px-3 rounded-md transition-all duration-200 text-sm">Salin</button>
                    </div>
                </div>
            </main>
        </section>

        <!-- Pemisah -->
        <div class="my-16 border-t-2 border-dashed border-slate-700"></div>

        <!-- Bagian Deobfuscator -->
        <section id="deobfuscator">
            <header class="text-center mb-8 md:mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-teal-400">Deobfuscator HTML</h1>
                <p class="mt-4 text-lg text-slate-400 max-w-2xl mx-auto">
                    Kembalikan kode yang di-obfuscate menjadi HTML asli.
                </p>
            </header>

            <!-- Deobfuscator Biasa -->
            <main class="w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-6 mb-12">
                <div class="flex-1 flex flex-col gap-4">
                    <label for="inputJs" class="text-lg font-semibold text-slate-200">1. Masukkan Kode (Biasa)</label>
                    <div class="relative flex-1">
                        <textarea id="inputJs" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-slate-700 rounded-lg text-slate-300 font-mono text-sm focus:border-teal-500 focus:ring-2 focus:ring-teal-500/50 transition resize-none" placeholder='<script>...<\/script>' spellcheck="false"></textarea>
                    </div>
                </div>
                <div class="flex-shrink-0 flex flex-col items-center justify-center gap-4">
                     <button id="deobfuscateBtn" class="w-full md:w-48 h-12 px-6 bg-teal-600 hover:bg-teal-700 text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300">Deobfuscate (Biasa)</button>
                </div>
                <div class="flex-1 flex flex-col gap-4">
                    <label for="outputHtml" class="text-lg font-semibold text-slate-200">2. Hasil HTML (Biasa)</label>
                    <div class="relative flex-1">
                        <textarea id="outputHtml" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-slate-700 rounded-lg text-slate-300 resize-none" readonly placeholder="Hasil HTML akan muncul di sini..."></textarea>
                        <button id="copyHtmlBtn" class="absolute top-3 right-3 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold py-1 px-3 rounded-md transition-all duration-200 text-sm">Salin</button>
                    </div>
                </div>
            </main>
            
            <!-- Deobfuscator Kuat -->
             <main class="w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-6">
                <div class="flex-1 flex flex-col gap-4">
                    <label for="inputJsHeavy" class="text-lg font-semibold text-slate-200">1. Masukkan Kode (Kuat)</label>
                    <div class="relative flex-1">
                        <textarea id="inputJsHeavy" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-premium rounded-lg text-slate-300 font-mono text-sm focus-premium transition resize-none" placeholder='<script>...<\/script>' spellcheck="false"></textarea>
                    </div>
                </div>
                <div class="flex-shrink-0 flex flex-col items-center justify-center gap-4">
                     <button id="deobfuscateHeavyBtn" class="group w-full md:w-48 h-12 px-6 btn-premium text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300 flex items-center justify-center">
                        <span>Deobfuscate (Kuat)</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a5 5 0 00-5 5v3H4a2 2 0 00-2 2v5a2 2 0 002 2h12a2 2 0 002-2v-5a2 2 0 00-2-2h-1V7a5 5 0 00-5-5zm0 8h4V7a4 4 0 10-8 0v3h4V9zm-2 2v2a1 1 0 102 0v-2a1 1 0 10-2 0z" /></svg>
                     </button>
                     <button id="clearAllBtn" class="w-full md:w-48 h-12 px-6 bg-slate-600 hover:bg-slate-700 text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300">Bersihkan Semua</button>
                </div>
                <div class="flex-1 flex flex-col gap-4">
                    <label for="outputHtmlHeavy" class="text-lg font-semibold text-slate-200">2. Hasil HTML (Kuat)</label>
                    <div class="relative flex-1">
                        <textarea id="outputHtmlHeavy" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-premium rounded-lg text-slate-300 resize-none" readonly placeholder="Hasil HTML akan muncul di sini..."></textarea>
                        <button id="copyHtmlHeavyBtn" class="absolute top-3 right-3 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold py-1 px-3 rounded-md transition-all duration-200 text-sm">Salin</button>
                    </div>
                </div>
            </main>
        </section>

        <footer class="text-center mt-12 text-slate-500"><p>Dibuat ulang dengan HTML, JS, dan Tailwind CSS.</p></footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // === ELEMEN UMUM ===
            const inputHtml = document.getElementById('inputHtml');
            const outputJs = document.getElementById('outputJs');
            const clearAllBtn = document.getElementById('clearAllBtn');
            const clearObfuscatorBtn = document.getElementById('clearObfuscatorBtn');
            
            function setupCopyButton(button, textarea) {
                // ... (Fungsi copy sama seperti sebelumnya, tidak perlu diubah)
            }

            // === OBFUSCATOR BIASA ===
            const obfuscateBtn = document.getElementById('obfuscateBtn');
            obfuscateBtn.addEventListener('click', () => {
                const originalHtml = inputHtml.value;
                if (!originalHtml.trim()) { outputJs.value = 'Silakan masukkan kode HTML.'; return; }
                const encodedHtml = btoa(unescape(encodeURIComponent(originalHtml)));
                outputJs.value = `<script>\n//<![CDATA[\n(function(){\n    var e = "${encodedHtml}";\n    var d = decodeURIComponent(escape(atob(e)));\n    document.write(d);\n    document.close();\n})();\n//]]>\n<\/script>`;
            });

            // === DEOBFUSCATOR BIASA ===
            const inputJs = document.getElementById('inputJs');
            const outputHtml = document.getElementById('outputHtml');
            const deobfuscateBtn = document.getElementById('deobfuscateBtn');
            deobfuscateBtn.addEventListener('click', () => {
                const script = inputJs.value;
                if (!script.trim()) { outputHtml.value = 'Silakan masukkan kode JavaScript.'; return; }
                const match = script.match(/var e = "([^"]+)"/);
                if (match && match[1]) {
                    try {
                        outputHtml.value = decodeURIComponent(escape(atob(match[1])));
                    } catch (e) {
                        outputHtml.value = `Gagal mendekode: ${e.message}`;
                    }
                } else {
                    outputHtml.value = "Format skrip tidak dikenali.";
                }
            });

            // === FUNGSI INTI OBFUSCATOR KUAT ===
            const obfuscateHeavyBtn = document.getElementById('obfuscateHeavyBtn');
            obfuscateHeavyBtn.addEventListener('click', () => {
                const originalHtml = inputHtml.value;
                if (!originalHtml.trim()) { outputJs.value = 'Silakan masukkan kode HTML.'; return; }

                // 1. Generate random key
                let key = '';
                for (let i = 0; i < 16; i++) {
                    key += String.fromCharCode(Math.floor(Math.random() * 94) + 33);
                }

                // 2. XOR encryption
                let encryptedBytes = [];
                for (let i = 0; i < originalHtml.length; i++) {
                    encryptedBytes.push(originalHtml.charCodeAt(i) ^ key.charCodeAt(i % key.length));
                }

                // 3. Convert to Base64
                const finalEncodedHtml = btoa(String.fromCharCode.apply(null, encryptedBytes));

                // 4. Generate polymorphic decoder script
                const r = (n=8) => [...Array(n)].map(() => Math.random().toString(36)[2]).join('');
                const varData = `_${r()}`;
                const varKey = `_${r()}`;
                const varFunc = `_${r()}`;
                const varLoop = `_${r()}`;
                const varOutput = `_${r()}`;
                
                const hiddenDoc = `["d","o","c","u","m","e","n","t"].join('')`;
                const hiddenWrite = `["w","r","i","t","e"].join('')`;
                const hiddenAtob = `window["a"+"t"+"o"+"b"]`;

                let decoderScript = `
(function(){
    var ${varData} = "${finalEncodedHtml}";
    var ${varKey} = "${key}";
    var ${varFunc} = function(${varLoop}, ${varOutput}) {
        for (var i = 0; i < ${varLoop}.length; i++) {
            ${varOutput} += String.fromCharCode(${varLoop}.charCodeAt(i) ^ ${varKey}.charCodeAt(i % ${varKey}.length));
        }
        return ${varOutput};
    };
    var decodedData = ${varFunc}(${hiddenAtob}(${varData}), '');
    window[${hiddenDoc}][${hiddenWrite}](decodedData);
})();`;
                outputJs.value = `<script>${decoderScript.replace(/\s/g, "")}<\/script>`;
            });


            // === FUNGSI INTI DEOBFUSCATOR KUAT ===
            const deobfuscateHeavyBtn = document.getElementById('deobfuscateHeavyBtn');
            const inputJsHeavy = document.getElementById('inputJsHeavy');
            const outputHtmlHeavy = document.getElementById('outputHtmlHeavy');
            deobfuscateHeavyBtn.addEventListener('click', () => {
                const script = inputJsHeavy.value;
                if (!script.trim()) { outputHtmlHeavy.value = 'Silakan masukkan kode JavaScript (Kuat).'; return; }
                
                // Regex to find the two variables (data and key) regardless of their random names.
                const dataRegex = /var ([a-zA-Z0-9$_]+)="([a-zA-Z0-9+/=]+)";/;
                const keyRegex = /var ([a-zA-Z0-9$_]+)="([^"]+)";var/;

                const dataMatch = script.match(dataRegex);
                const keyMatch = script.match(keyRegex);

                if (dataMatch && dataMatch[2] && keyMatch && keyMatch[2]) {
                    const encodedData = dataMatch[2];
                    const key = keyMatch[2];
                    
                    try {
                        const encryptedBytes = atob(encodedData);
                        let decryptedHtml = '';
                        for (let i = 0; i < encryptedBytes.length; i++) {
                            decryptedHtml += String.fromCharCode(encryptedBytes.charCodeAt(i) ^ key.charCodeAt(i % key.length));
                        }
                        outputHtmlHeavy.value = decryptedHtml;
                    } catch (e) {
                         outputHtmlHeavy.value = `Gagal mendekode: ${e.message}. Pastikan ini adalah kode dari Obfuscator Kuat.`;
                    }
                } else {
                     outputHtmlHeavy.value = "Format skrip kuat tidak dikenali. Tidak dapat menemukan data atau kunci.";
                }
            });


            // === Tombol Bersihkan & Copy ===
            clearObfuscatorBtn.addEventListener('click', () => {
                inputHtml.value = '';
                outputJs.value = '';
            });

             clearAllBtn.addEventListener('click', () => {
                inputHtml.value = '';
                outputJs.value = '';
                inputJs.value = '';
                outputHtml.value = '';
                inputJsHeavy.value = '';
                outputHtmlHeavy.value = '';
            });

            setupCopyButton(document.getElementById('copyJsBtn'), outputJs);
            setupCopyButton(document.getElementById('copyHtmlBtn'), outputHtml);
            setupCopyButton(document.getElementById('copyHtmlHeavyBtn'), outputHtmlHeavy);
        });
    </script>

</body>
</html>
