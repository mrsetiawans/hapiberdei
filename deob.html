<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obfuscator & Deobfuscator HTML (Singularity)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        textarea { -ms-overflow-style: none; scrollbar-width: none; }
        textarea::-webkit-scrollbar { display: none; }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        .btn-singularity { background: linear-gradient(45deg, #c0392b, #8e44ad); }
        .btn-singularity:hover { background: linear-gradient(45deg, #e74c3c, #9b59b6); }
        .focus-singularity:focus { --tw-ring-color: #c0392b; }
        .border-singularity { border-color: #c0392b; }
    </style>
</head>
<body class="bg-slate-900 text-white antialiased">

    <div class="container mx-auto px-4 py-8 md:py-12">

        <!-- Bagian Obfuscator -->
        <section id="obfuscator">
            <header class="text-center mb-8 md:mb-12">
                <h1 class="text-4xl md:text-5xl font-orbitron font-bold text-cyan-400 tracking-wider">HTML OBFUSCATOR</h1>
                <p class="mt-4 text-lg text-slate-400 max-w-2xl mx-auto">Sembunyikan kode sumber HTML Anda dengan metode enkripsi berlapis dan logika dinamis.</p>
            </header>

            <main class="w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-6">
                <div class="flex-1 flex flex-col gap-4">
                    <label for="inputHtml" class="text-lg font-semibold text-slate-200">1. Masukkan Kode HTML</label>
                    <div class="relative flex-1">
                        <textarea id="inputHtml" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-slate-700 rounded-lg text-slate-300 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/50 transition duration-300 resize-none" placeholder="<!DOCTYPE html>..." spellcheck="false"></textarea>
                    </div>
                </div>
                
                <div class="flex-shrink-0 flex flex-col items-center justify-center gap-4">
                     <button id="obfuscateHeavyBtn" class="group w-full md:w-56 h-16 px-6 btn-singularity text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300 flex items-center justify-center">
                        <span class="font-orbitron text-lg">OBFUSCATE (SINGULARITY)</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 ml-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg>
                    </button>
                     <button id="clearObfuscatorBtn" class="w-full md:w-56 h-12 px-6 bg-slate-600 hover:bg-slate-700 text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300">
                        Bersihkan
                    </button>
                </div>

                <div class="flex-1 flex flex-col gap-4">
                    <label for="outputJs" class="text-lg font-semibold text-slate-200">2. Salin Hasil JavaScript</label>
                    <div class="relative flex-1">
                        <textarea id="outputJs" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-slate-700 rounded-lg text-slate-300 font-mono text-sm resize-none" readonly placeholder="Hasil JavaScript akan muncul di sini..."></textarea>
                        <button id="copyJsBtn" class="absolute top-3 right-3 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold py-1 px-3 rounded-md transition-all duration-200 text-sm">Salin</button>
                    </div>
                </div>
            </main>
        </section>

        <div class="my-16 border-t-2 border-dashed border-slate-700"></div>

        <!-- Bagian Deobfuscator -->
        <section id="deobfuscator">
            <header class="text-center mb-8 md:mb-12">
                <h1 class="text-4xl md:text-5xl font-orbitron font-bold text-teal-400">HTML DEOBFUSCATOR</h1>
                <p class="mt-4 text-lg text-slate-400 max-w-2xl mx-auto">Kembalikan kode yang di-obfuscate dengan metode Singularity.</p>
            </header>
             <main class="w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-6">
                <div class="flex-1 flex flex-col gap-4">
                    <label for="inputJsHeavy" class="text-lg font-semibold text-slate-200">1. Masukkan Kode (Singularity)</label>
                    <div class="relative flex-1">
                        <textarea id="inputJsHeavy" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-singularity rounded-lg text-slate-300 font-mono text-sm focus-singularity transition resize-none" placeholder='<script>...<\/script>' spellcheck="false"></textarea>
                    </div>
                </div>
                <div class="flex-shrink-0 flex flex-col items-center justify-center gap-4">
                     <button id="deobfuscateHeavyBtn" class="group w-full md:w-56 h-16 px-6 btn-singularity text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300 flex items-center justify-center">
                        <span class="font-orbitron text-lg">DEOBFUSCATE</span>
                     </button>
                     <button id="clearAllBtn" class="w-full md:w-56 h-12 px-6 bg-slate-600 hover:bg-slate-700 text-white font-semibold rounded-lg shadow-lg transition-transform transform hover:scale-105 duration-300">Bersihkan Semua</button>
                </div>
                <div class="flex-1 flex flex-col gap-4">
                    <label for="outputHtmlHeavy" class="text-lg font-semibold text-slate-200">2. Hasil HTML</label>
                    <div class="relative flex-1">
                        <textarea id="outputHtmlHeavy" class="w-full h-96 min-h-[300px] p-4 bg-slate-800 border-2 border-singularity rounded-lg text-slate-300 resize-none" readonly placeholder="Hasil HTML akan muncul di sini..."></textarea>
                        <button id="copyHtmlHeavyBtn" class="absolute top-3 right-3 bg-slate-700 hover:bg-slate-600 text-slate-300 font-semibold py-1 px-3 rounded-md transition-all duration-200 text-sm">Salin</button>
                    </div>
                </div>
            </main>
        </section>

        <footer class="text-center mt-12 text-slate-500"><p>Dibuat ulang dengan HTML, JS, dan Tailwind CSS.</p></footer>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const inputHtml = document.getElementById('inputHtml');
        const outputJs = document.getElementById('outputJs');
        const obfuscateHeavyBtn = document.getElementById('obfuscateHeavyBtn');
        
        const r = (n = 8) => [...Array(n)].map(() => Math.random().toString(36)[2]).join('');
        const shuffle = (arr) => arr.map(v => ({ v, sort: Math.random() })).sort((a, b) => a.sort - b.sort).map(({ v }) => v);

        obfuscateHeavyBtn.addEventListener('click', () => {
            const originalHtml = inputHtml.value;
            if (!originalHtml.trim()) { outputJs.value = 'Silakan masukkan kode HTML.'; return; }

            // LAYER 1: Caesar Cipher Shift
            const shift = Math.floor(Math.random() * 20) + 5;
            let shiftedHtml = '';
            for (let i = 0; i < originalHtml.length; i++) {
                shiftedHtml += String.fromCharCode(originalHtml.charCodeAt(i) + shift);
            }

            // LAYER 2: XOR Encryption
            const key = [...Array(16)].map(() => String.fromCharCode(Math.floor(Math.random() * 94) + 33)).join('');
            let encrypted = '';
            for (let i = 0; i < shiftedHtml.length; i++) {
                encrypted += String.fromCharCode(shiftedHtml.charCodeAt(i) ^ key.charCodeAt(i % key.length));
            }
            
            // LAYER 3: Base64
            const base64Encoded = btoa(encrypted);
            
            // LAYER 4: Data Fragmentation & Logic Obfuscation
            const dataChunks = [];
            let remainingData = base64Encoded;
            while(remainingData.length > 0) {
                const chunkSize = Math.floor(Math.random() * 20) + 10;
                dataChunks.push(remainingData.substring(0, chunkSize));
                remainingData = remainingData.substring(chunkSize);
            }
            
            const chunkOrder = shuffle([...Array(dataChunks.length).keys()]);
            const shuffledChunks = chunkOrder.map(i => dataChunks[i]);

            const blueprint = {
                data: { chunks: shuffledChunks, order: chunkOrder },
                key: key,
                shift: shift
            };

            const blueprintStr = JSON.stringify(blueprint);
            const finalPayload = btoa(unescape(encodeURIComponent(blueprintStr)));
            
            // LAYER 5: Dynamic JS Loader
            const p = `_${r()}`; // Payload variable name
            const c = `_${r()}`; // Config variable name
            const w = `_${r(4)}`; // Window ref
            const d = `_${r(4)}`; // Document ref
            
            // Hide keywords
            const atobKey = r(5);
            const jsonKey = r(5);
            const docKey = r(5);
            const writeKey = r(5);
            
            let decoder = `
(function(){
var ${p}="${finalPayload}";
var ${w}=window;
var _k={"${atobKey}":"atob","${jsonKey}":"JSON","${docKey}":"document","${writeKey}":"write"};
var ${c}=${w}[_k["${jsonKey}"]].parse(decodeURIComponent(escape(${w}[_k["${atobKey}"]](${p}))));
var _d="";
for(var i=0;i<${c}.data.chunks.length;i++){_d+=(${c}.data.chunks[${c}.data.order.indexOf(i)])};
var _x=w[_k["${atobKey}"]](_d);
var _s="";
for(var i=0;i<_x.length;i++){_s+=String.fromCharCode(_x.charCodeAt(i)^${c}.key.charCodeAt(i%${c}.key.length))};
var _h="";
for(var i=0;i<_s.length;i++){_h+=String.fromCharCode(_s.charCodeAt(i)-${c}.shift)};
var ${d}=${w}[_k["${docKey}"]];
${d}[_k["${writeKey}"]](_h);
})();
`;
            outputJs.value = `<script>${decoder.replace(/\s/g, "")}<\/script>`;
        });

        const deobfuscateHeavyBtn = document.getElementById('deobfuscateHeavyBtn');
        const inputJsHeavy = document.getElementById('inputJsHeavy');
        const outputHtmlHeavy = document.getElementById('outputHtmlHeavy');

        deobfuscateHeavyBtn.addEventListener('click', () => {
            const script = inputJsHeavy.value;
            if (!script.trim()) { outputHtmlHeavy.value = 'Silakan masukkan kode JavaScript.'; return; }
            
            const payloadMatch = script.match(/var[a-zA-Z0-9$_]+="([a-zA-Z0-9+/=]+)"/);
            if(!payloadMatch || !payloadMatch[1]){
                outputHtmlHeavy.value = "Format skrip tidak dikenali. Payload tidak ditemukan.";
                return;
            }
            
            try {
                const payload = payloadMatch[1];
                const blueprintStr = decodeURIComponent(escape(atob(payload)));
                const blueprint = JSON.parse(blueprintStr);

                // Re-assemble data
                let reassembledData = new Array(blueprint.data.chunks.length);
                for(let i=0; i < blueprint.data.chunks.length; i++){
                    reassembledData[blueprint.data.order[i]] = blueprint.data.chunks[i];
                }
                const base64Encoded = reassembledData.join('');

                // Decrypt
                const encrypted = atob(base64Encoded);
                let shiftedHtml = '';
                for (let i = 0; i < encrypted.length; i++) {
                    shiftedHtml += String.fromCharCode(encrypted.charCodeAt(i) ^ blueprint.key.charCodeAt(i % blueprint.key.length));
                }

                let originalHtml = '';
                for (let i = 0; i < shiftedHtml.length; i++) {
                    originalHtml += String.fromCharCode(shiftedHtml.charCodeAt(i) - blueprint.shift);
                }

                outputHtmlHeavy.value = originalHtml;
            } catch (e) {
                outputHtmlHeavy.value = `Gagal mendekode: ${e.message}. Pastikan ini adalah kode dari Obfuscator Singularity.`;
            }
        });
        
        clearObfuscatorBtn.addEventListener('click', () => {
            inputHtml.value = '';
            outputJs.value = '';
        });
        clearAllBtn.addEventListener('click', () => {
            inputHtml.value = '';
            outputJs.value = '';
            inputJsHeavy.value = '';
            outputHtmlHeavy.value = '';
        });
        
        // Setup copy buttons
        const copyJsBtn = document.getElementById('copyJsBtn');
        const copyHtmlHeavyBtn = document.getElementById('copyHtmlHeavyBtn');
        copyJsBtn.addEventListener('click', () => { if(outputJs.value) navigator.clipboard.writeText(outputJs.value); });
        copyHtmlHeavyBtn.addEventListener('click', () => { if(outputHtmlHeavy.value) navigator.clipboard.writeText(outputHtmlHeavy.value); });
    });
    </script>
</body>
</html>
